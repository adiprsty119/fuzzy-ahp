<div
  x-show="page === 'edit'"
  x-cloak
  x-transition:enter="transition ease-out duration-500"
  x-transition:enter-start="opacity-0 translate-y-4"
  x-transition:enter-end="opacity-100 translate-y-0"
  x-transition:leave="transition ease-in duration-300"
  x-transition:leave-start="opacity-100 translate-y-0"
  x-transition:leave-end="opacity-0 translate-y-4"
  class="p-8 rounded-2xl shadow-xl w-full border border-gray-200 dark:border-gray-700 {{ 'bg-gray-800 text-gray-100' if current_theme == 'dark' else 'bg-white text-gray-800 dark:bg-gray-100' }}"
>
  <!-- Header -->
  <div class="flex items-center justify-between border-b pb-4 mb-8">
    <div>
      <h2 class="text-3xl font-semibold flex items-center gap-3">
        <i class="bx bx-user-circle text-yellow-500 text-4xl"></i>
        {{ 'Edit Data Pengguna' if current_lang == 'id' else 'Edit User Data' }}
      </h2>
      <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
        {{ 'Perbarui informasi pengguna yang terdaftar di sistem' if
        current_lang == 'id' else 'Update the information of users registered in
        the system' }}
      </p>
    </div>

    <button
      @click="page = 'main'; $store.page.breadcrumbs = ['Manajemen Pengguna']"
      class="px-2 py-2 rounded-lg cursor-pointer {{ 'bg-gray-300 hover:bg-gray-900 dark:bg-gray-700' if current_theme == 'dark' else 'bg-gray-200 hover:bg-gray-500 dark:bg-gray-400' }}"
    >
      <i class="fa-solid fa-backward"></i>
      {{ 'Kembali' if current_lang == 'id' else 'Back' }}
    </button>
  </div>

  <!-- Form Edit -->
  <template x-if="selectedUser">
    <form
      method="POST"
      :action="'/admin/edit_user/' + selectedUser.id"
      class="space-y-6 max-w-4xl mx-auto rounded-lg py-8 px-8 {{ 'bg-gray-900 text-gray-100' if current_theme == 'dark' else 'bg-white text-gray-800 dark:bg-gray-100' }}"
    >
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

      <!-- Foto Profil -->
      <div
        class="flex items-center gap-8 p-5 rounded-lg {{ 'bg-gray-900 text-gray-100' if current_theme == 'dark' else 'bg-white text-gray-800 dark:bg-gray-100' }}"
      >
        <div class="relative w-28 h-28">
          <img
            :src="selectedUser.foto ? `/static/${selectedUser.foto}` : '/static/img/default-user.png'"
            alt="Foto Profil"
            class="w-28 h-28 rounded-full object-cover border-4 border-yellow-500 shadow-md"
          />
        </div>
        <div class="flex-1">
          <label class="block font-semibold mb-2">
            {{ 'Ganti Foto' if current_lang == 'id' else 'Change Photo' }}
          </label>
          <input
            type="file"
            name="foto"
            accept="image/*"
            class="block w-full text-sm file:mr-4 file:py-2 file:px-5 file:rounded-lg file:border-0 file:bg-yellow-500 file:text-white hover:file:bg-yellow-600 cursor-pointer"
          />
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-2">
            {{ 'Biarkan kosong jika tidak ingin mengubah foto.' if current_lang
            == 'id' else 'Leave blank if you donâ€™t want to change the photo.' }}
          </p>
        </div>
      </div>

      <!-- Informasi Dasar -->
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <label for="nama_lengkap" class="block font-semibold mb-2">
            {{ 'Nama Lengkap' if current_lang == 'id' else 'Full Name' }}
          </label>
          <input
            type="text"
            id="nama_lengkap"
            name="nama_lengkap"
            x-model="selectedUser.nama_lengkap"
            required
            class="w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400"
          />
        </div>

        <div>
          <label for="email" class="block font-semibold mb-2">Email</label>
          <input
            type="email"
            id="email"
            name="email"
            x-model="selectedUser.email"
            required
            class="w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400"
          />
        </div>

        <div>
          <label for="username" class="block font-semibold mb-2"
            >Username</label
          >
          <input
            type="text"
            id="username"
            name="username"
            x-model="selectedUser.username"
            required
            class="w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400"
          />
        </div>

        <div>
          <label for="jenis_kelamin" class="block font-semibold mb-2">
            {{ 'Jenis Kelamin' if current_lang == 'id' else 'Gender' }}
          </label>
          <select
            id="jenis_kelamin"
            name="jenis_kelamin"
            x-model="selectedUser.jenis_kelamin"
            class="w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400"
          >
            <option value="">
              {{ current_lang == 'id' and '-- Pilih Jenis Kelamin --' or '--
              Select Gender --' }}
            </option>
            <option value="Laki-laki">
              {{ current_lang == 'id' and 'Laki-laki' or 'Male' }}
            </option>
            <option value="Perempuan">
              {{ current_lang == 'id' and 'Perempuan' or 'Female' }}
            </option>
          </select>
        </div>
      </div>

      <!-- Info Tambahan -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div>
          <label for="usia" class="block font-semibold mb-2">
            {{ 'Usia' if current_lang == 'id' else 'Age' }}
          </label>
          <input
            type="number"
            id="usia"
            name="usia"
            min="0"
            x-model="selectedUser.usia"
            class="w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400"
          />
        </div>

        <div>
          <label for="nomor_hp" class="block font-semibold mb-2">
            {{ 'Nomor HP' if current_lang == 'id' else 'Phone Number' }}
          </label>
          <input
            type="text"
            id="nomor_hp"
            name="nomor_hp"
            x-model="selectedUser.nomor_hp"
            placeholder="Contoh: 081234567890"
            class="w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400"
          />
        </div>

        <div>
          <label for="level" class="block font-semibold mb-2">
            {{ 'Level Pengguna' if current_lang == 'id' else 'User Level' }}
          </label>
          <select
            id="level"
            name="level"
            x-model="selectedUser.level"
            required
            class="w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400"
          >
            <option value="peserta">
              {{ 'Peserta' if current_lang == 'id' else 'Participant' }}
            </option>
            <option value="penilai">
              {{ 'Penilai' if current_lang == 'id' else 'Evaluator' }}
            </option>
            <option value="admin">Admin</option>
          </select>
        </div>
      </div>

      <!-- Status -->
      <div>
        <label for="status" class="block font-semibold mb-2">
          {{ 'Status Akun' if current_lang == 'id' else 'Account Status' }}
        </label>
        <select
          id="status"
          name="status"
          x-model="selectedUser.status"
          required
          class="w-full px-4 py-2.5 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400"
        >
          <option value="aktif">
            {{ current_lang == 'id' and 'Aktif' or 'Active' }}
          </option>
          <option value="nonaktif">
            {{ current_lang == 'id' and 'Nonaktif' or 'Inactive' }}
          </option>
        </select>
      </div>

      <!-- Tombol Aksi -->
      <div class="flex justify-end gap-4 pt-8 border-t">
        <button
          type="button"
          @click="page = 'main'; $store.page.breadcrumbs = ['Manajemen Pengguna']"
          class="px-6 py-2.5 rounded-lg font-medium cursor-pointer bg-red-600 hover:bg-red-700 text-gray-700 dark:text-gray-100 transition-all duration-200 shadow-sm"
        >
          <i class="fa-solid fa-xmark"></i>
          {{ 'Batal' if current_lang == 'id' else 'Cancel' }}
        </button>

        <button
          type="submit"
          class="px-8 py-2.5 rounded-lg font-semibold cursor-pointer text-white bg-yellow-500 hover:bg-yellow-600 focus:ring-2 focus:ring-yellow-400 transition-all duration-200 shadow-md"
        >
          <i class="bx bx-save mr-1"></i>
          {{ 'Simpan Perubahan' if current_lang == 'id' else 'Save Changes' }}
        </button>
      </div>
    </form>
  </template>
</div>
